@using Soenneker.Blazor.Snackbar.Abstract
@using Soenneker.Quark.Dtos.Colors
@using Soenneker.Quark.Snackbars
@using Soenneker.Quark.Snackbars.Enums
@inject ISnackbarUtil SnackbarUtil

<SnackbarStack @ref="_snackbarStack" Location="SnackbarLocation.BottomEnd" />

@code {
    SnackbarStack? _snackbarStack;
    const int _intervalBeforeMsgClose = 2000;

    protected override void OnInitialized()
    {
        SnackbarUtil.ShowEvent += Show;
        SnackbarUtil.ErrorEvent += Error;
    }

    private async ValueTask Show(string message)
    {
        await _snackbarStack!.Push(message, Color.Dark, options => { options.HideDelay = _intervalBeforeMsgClose; });
    }

    private async ValueTask Error(string message)
    {
        await _snackbarStack!.Push(message, Color.Danger, options => { options.HideDelay = _intervalBeforeMsgClose; });
    }

}